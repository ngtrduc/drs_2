<table class="table">
  <thead>
    <% if current_user.manager? %>
      <th><%= t "request.user" %></th>
    <% end %>
    <th><%= t "request.type" %></th>
    <th><%= t "request.leave_from" %></th>
    <th><%= t "request.leave_to" %></th>
    <th><%= t "request.reason" %></th>
    <th><%= t "request.compensation_time_from" %></th>
    <th><%= t "request.compensation_time_to" %></th>
    <th><%= current_user.manager? ?
      sort_link(@search, :status, t("request.status")) : t("request.status") %></th>
    <th class="action"><%= t :action %></th>
  </thead>
  <tbody>
    <% @requests.each_with_index do |request, index| %>
      <tr>
        <% if current_user.manager? %>
          <td>
            <div class="dn-text-wrap dn-text-email">
              <%= request.user.email %>
            </div>
          </td>
        <% end %>
        <td><%= t("request.#{request.request_type}") %></td>
        <td><%= request.leave_from.strftime t(:time_type_2) %></td>
        <td><%= request.leave_to.strftime t(:time_type_2) %></td>
        <td>
          <div class="dn-text-wrap dn-text-reason"><%= request.reason %></div>
        </td>
        <td>
          <%= request.compensation_time_from.strftime t(:time_type_2) unless
            request.compensation_time_from.nil? %>
        </td>
        <td>
          <%= request.compensation_time_to.strftime t(:time_type_2) unless
            request.compensation_time_to.nil? %>
        </td>
        <td id="status-<%= request.id %>">
          <%= approve_content request %>
        </td>
        <% if current_user.manager? %>
          <td id="approved-<%= request.id %>">
            <%= render "form_approved", request: request %>
          </td>
        <% else %>
          <% if can? :destroy, request %>
            <td>
              <%= link_to t(:edit), edit_request_path(request),
                class: "btn btn-primary" %>
              <%= link_to t(:delete), request, method: :delete,
                data: {confirm: t(:sure)}, class: "btn btn-danger" %>
            </td>
          <% end %>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
